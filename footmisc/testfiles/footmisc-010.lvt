\documentclass{article}

\input{regression-test}

\usepackage{hyperref}           % loaded early

\usepackage{lipsum}
\usepackage[moveskip]{footmisc}   



\newcommand\sample{A sample paragraph\footnote{A footnote} with
four\footnote{A second} footnotes two of which are coming\footnote{A
third} up now.\footnote{Final} And some more text.\par}

\newcommand\sampleii{A short text\footnote{\lipsum[2] A par command at
the end of a footnote results in an extra line (bug?)} with a very
long footnote.}

\newcommand\sampleiii{Two footnotes\footnote{A}\footnote{B} in succession.}

\setlength\textheight{24\baselineskip}

\showoutput

\begin{document}

\START

Text\footnote{\label{fn}A label test footnote.}

\sample\sample\sample\sampleiii \sampleiii \sampleiii 
\sampleii \sampleiii \sampleiii \sampleiii \sampleiii

Where is footnote~\ref{fn}?

\end{document}

